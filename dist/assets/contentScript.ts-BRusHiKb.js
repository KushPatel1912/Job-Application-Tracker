(function(){let h=0;function b(t){return((t==null?void 0:t.innerText)||(t==null?void 0:t.textContent)||"").trim()}function m(t,e){const i=(t||"").toLowerCase();return e.some(o=>i.includes(o))}function w(t){var o,s,r,c;if(!t)return"";const e=(t.tagName||"").toUpperCase();if((((s=(o=t.type)==null?void 0:o.toLowerCase)==null?void 0:s.call(o))||"")==="checkbox")return t.checked?"Yes":"No";if(e==="SELECT"){const n=t;return((c=(r=n.options)==null?void 0:r[n.selectedIndex])==null?void 0:c.text)||n.value||""}return t.value||""}function p(t,e){const i=t?Array.from(t.querySelectorAll("label")):[];for(const o of i){const s=b(o).toLowerCase();if(s&&e.some(r=>s.includes(r))){const r=o.getAttribute("for");if(r){const u=t.querySelector(`#${CSS.escape(r)}`),a=w(u);if(a)return a.trim()}const c=o.querySelector("input,select,textarea"),n=w(c);if(n)return n.trim()}}return""}function y(t,e){const i=Array.from((t==null?void 0:t.querySelectorAll("input,select,textarea"))||[]);for(const o of i){const s=(o.getAttribute("name")||"").toLowerCase(),r=(o.id||"").toLowerCase(),c=(o.getAttribute("aria-label")||"").toLowerCase(),n=(o.getAttribute("placeholder")||"").toLowerCase(),u=`${s} ${r} ${c} ${n}`;if(e.some(a=>u.includes(a))){const a=w(o);if(a)return a.trim()}}return""}function q(t){var i;const e=Array.from((t==null?void 0:t.querySelectorAll('input[type="file"]'))||[]);for(const o of e){const s=o;if(s.files&&s.files.length>0)return((i=s.files[0])==null?void 0:i.name)||"";if(s.value){const r=s.value.split(/[\\/]/);return r[r.length-1]||""}}return""}function M(){var u,a;const t=document.querySelector('meta[property="og:title"], meta[name="title"]'),e=(t==null?void 0:t.getAttribute("content"))||document.title||"",i=document.querySelector('[data-company-name], [class*="company" i], [class*="employer" i]'),o=b(i||void 0),s=document.querySelector('[class*="location" i], [data-test*="location" i]'),r=b(s||void 0),c=((a=(u=document.body)==null?void 0:u.innerText)==null?void 0:a.toLowerCase())||"";let n="";return c.includes("remote")?n="Remote":c.includes("hybrid")?n="Hybrid":(c.includes("on-site")||c.includes("onsite")||c.includes("on site"))&&(n="On-site"),{title:e,company:o,location:r,workMode:n}}function L(t){var C;const e=(location.href||"").toLowerCase(),o=["greenhouse","lever.co","boards.greenhouse.io","workday","myworkdayjobs","ashbyhq","ashby","smartrecruiters","workable","icims","bamboohr","jobs.lever","workforcenow","jobvite","recruitee","lever","greenhouse.io"].some(l=>e.includes(l))||m(e,["job","jobs","careers","apply"]),s=t||document,r=Array.from(s.querySelectorAll("input,select,textarea")),c=r.some(l=>(l.getAttribute("type")||"").toLowerCase()==="password");if(c)return!1;const n=(((C=document.body)==null?void 0:C.innerText)||"").toLowerCase(),u=m(n,["apply","job","position","role","employment","experience","resume","cv","cover letter"]),a=r.some(l=>(l.getAttribute("type")||"").toLowerCase()==="file"),d=r.some(l=>{const f=(l.getAttribute("name")||"").toLowerCase(),k=(l.id||"").toLowerCase(),x=(l.getAttribute("aria-label")||"").toLowerCase(),T=(l.getAttribute("placeholder")||"").toLowerCase(),E=`${f} ${k} ${x} ${T}`;return m(E,["cover","cover letter"])}),S=Array.from(s.querySelectorAll('button,input[type="submit"], [role="button"]')).some(l=>m((l.innerText||l.value||l.textContent||"").trim().toLowerCase(),["apply","submit application","send application","apply now","submit"])),v=r.filter(l=>{const f=(l.getAttribute("type")||"").toLowerCase();return["hidden","button","submit","reset"].indexOf(f)===-1}).length>=3||a||d;return[o,u,a,d,S,v].filter(Boolean).length>=2&&!c}function B(t){const e=new Date().toISOString().slice(0,10),i=location.href,o=["company","organisation","organization","employer","org"],s=["location","city","state","country"],r=["title","position","role","job title"],c=["remote","hybrid","on-site","onsite","on site","work type","work mode"],n=t||document,u={company:p(n,o),location:p(n,s),title:p(n,r),workMode:p(n,c)},a={company:u.company||y(n,o),location:u.location||y(n,s),title:u.title||y(n,r),workMode:u.workMode||y(n,c)},d=M(),g=q(n);return{company:a.company||d.company||"",location:a.location||d.location||"",title:a.title||d.title||"",workMode:a.workMode||d.workMode||"",applicationDate:e,url:i,resume:g}}async function I(t){try{return await chrome.runtime.sendMessage({type:"JOB_APPLICATION_SUBMITTED",payload:t})}catch(e){return{ok:!1,error:String((e==null?void 0:e.message)||e)}}}function A(t){const e=Date.now();if(e-h<8e3)return;h=e;const i=t.target instanceof HTMLFormElement?t.target:null;if(!L(i))return;const o=B(i||document);setTimeout(()=>{I(o)},10)}function O(t){const e=t.target;if(!e)return;const i=(e.innerText||e.textContent||"").trim();if(i&&m(i,["apply","submit","send application","apply now","submit application"])){const o=e.closest("form");L(o||document)&&A({target:o||document})}}function $(){document.addEventListener("submit",A,!0),document.addEventListener("click",O,!0)}$();
//# sourceMappingURL=contentScript.ts-BRusHiKb.js.map
})()
