import{r as x,j as e,c as g}from"./tailwind-Dl9gRVam.js";import{D as u,S as c}from"./types-nBKLuWuN.js";function v(){const[d,i]=x.useState([]),r=()=>{try{const o=Object.keys(localStorage).filter(a=>a.startsWith("jt_form_")).map(a=>{try{const t=JSON.parse(localStorage.getItem(a)||"{}");return{key:a,data:t,timestamp:t.timestamp||0}}catch{return{key:a,data:{},timestamp:0}}}).sort((a,t)=>t.timestamp-a.timestamp);i(o)}catch(s){console.warn("Job Tracker: Failed to load saved forms:",s)}},h=s=>{try{localStorage.removeItem(s),r(),console.log("Job Tracker: Form cleared:",s)}catch(m){console.warn("Job Tracker: Failed to clear form:",m)}},l=()=>{try{Object.keys(localStorage).filter(o=>o.startsWith("jt_form_")).forEach(o=>localStorage.removeItem(o)),i([]),console.log("Job Tracker: All forms cleared")}catch(s){console.warn("Job Tracker: Failed to clear all forms:",s)}};return x.useEffect(()=>{r();const s=()=>r();return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[]),{savedForms:d,clearForm:h,clearAllForms:l,loadSavedForms:r}}const j=()=>{const[d,i]=x.useState(""),[r,h]=x.useState(u),{savedForms:l,clearForm:s,clearAllForms:m}=v();x.useEffect(()=>{chrome.storage.local.get([c.sheetId,c.sheetName],t=>{i(t[c.sheetId]||""),h(t[c.sheetName]||u)})},[]);async function o(){const t={[c.sheetId]:d.trim(),[c.sheetName]:r.trim()||u};await chrome.storage.local.set(t);const n=await chrome.runtime.sendMessage({type:"JT_SET_CONFIG",sheetId:d,sheetName:r});n!=null&&n.ok?alert("Saved"):alert((n==null?void 0:n.error)||"Failed to save")}async function a(){const t=await chrome.runtime.sendMessage({type:"JT_AUTHORIZE"});t!=null&&t.ok?alert("Connected to Google"):alert((t==null?void 0:t.error)||"Authorization failed")}return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 text-slate-900",children:[e.jsx("div",{className:"text-xl font-bold mb-4",children:"Job Tracker Settings"}),e.jsxs("div",{className:"border rounded-xl p-4 space-y-3 mb-6",children:[e.jsx("div",{className:"text-lg font-semibold mb-3",children:"Google Sheets Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500",children:"Google Sheet ID"}),e.jsx("input",{className:"w-full mt-1 p-2 border rounded-lg",placeholder:"1AbCDEFghiJKLmnopQRSTuvWXyz...",value:d,onChange:t=>i(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500",children:"Sheet Name (tab)"}),e.jsx("input",{className:"w-full mt-1 p-2 border rounded-lg",placeholder:"Sheet1",value:r,onChange:t=>h(t.target.value)})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Find the ID in the spreadsheet URL: https://docs.google.com/spreadsheets/d/",e.jsx("strong",{children:"ID"}),"/edit"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-2 rounded-lg bg-blue-600 text-white",onClick:o,children:"Save"}),e.jsx("button",{className:"px-3 py-2 rounded-lg border",onClick:a,children:"Connect Google"})]})]}),e.jsxs("div",{className:"border rounded-xl p-4 space-y-3",children:[e.jsx("div",{className:"text-lg font-semibold mb-3",children:"Form Protection Management"}),l.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:[l.length," form",l.length>1?"s":""," with unsaved data:"]}),l.map(t=>e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"text-sm font-medium text-slate-700",children:t.key.replace("jt_form_","Form: ")}),e.jsx("button",{onClick:()=>s(t.key),className:"text-xs text-red-600 hover:text-red-800 underline",children:"Clear"})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Last saved: ",new Date(t.timestamp).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Fields: ",Object.keys(t.data).length]})]},t.key)),e.jsx("button",{onClick:m,className:"w-full px-3 py-2 rounded-lg border border-red-300 text-red-600 hover:bg-red-50",children:"Clear All Saved Forms"})]}):e.jsx("div",{className:"text-sm text-slate-500 text-center py-4",children:"No forms with unsaved data found"}),e.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[e.jsx("div",{children:"• Auto-save runs every 3 seconds when typing"}),e.jsx("div",{children:"• Data is restored when you return to the page"}),e.jsx("div",{children:"• Forms are cleared after successful submission"})]})]})]})},p=document.getElementById("root"),b=g(p);b.render(e.jsx(j,{}));
//# sourceMappingURL=index.html-CziXCNWP.js.map
