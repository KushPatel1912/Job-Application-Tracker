{"version":3,"file":"index.html-Czre-1zW.js","sources":["../../src/popup/ui/Popup.tsx","../../src/popup/index.tsx"],"sourcesContent":["/** @format */\n\nimport React, { useEffect, useState } from \"react\";\nimport {\n  DEFAULT_SHEET_NAME,\n  STORAGE_KEYS,\n  type LastSubmission,\n  type StatusState,\n} from \"../../shared/types\";\n\nfunction useChromeStorage<T>(key: string, initial: T) {\n  const [value, setValue] = useState<T>(initial);\n  useEffect(() => {\n    chrome.storage.local.get([key], (r) => {\n      setValue((r as any)[key] ?? initial);\n    });\n  }, [key]);\n  return value;\n}\n\nexport const Popup: React.FC = () => {\n  const lastSubmission = useChromeStorage<\n    LastSubmission | undefined\n  >(STORAGE_KEYS.lastSubmission, undefined);\n  const lastStatus = useChromeStorage<\n    StatusState | undefined\n  >(STORAGE_KEYS.lastStatus, undefined);\n\n  const [sheetId, setSheetId] = useState<string>(\"\");\n\n  useEffect(() => {\n    chrome.storage.local.get(\n      [STORAGE_KEYS.sheetId],\n      (r) =>\n        setSheetId(\n          (r as any)[STORAGE_KEYS.sheetId] || \"\"\n        )\n    );\n  }, []);\n\n  async function connect() {\n    const resp = await chrome.runtime.sendMessage({\n      type: \"JT_AUTHORIZE\",\n    });\n    if (!resp?.ok)\n      alert(resp?.error || \"Authorization failed\");\n    else alert(\"Connected to Google\");\n  }\n\n  function openSheet() {\n    if (!sheetId) {\n      alert(\"Set your Google Sheet in Options\");\n      return;\n    }\n    const url = `https://docs.google.com/spreadsheets/d/${encodeURIComponent(\n      sheetId\n    )}`;\n    window.open(url, \"_blank\");\n  }\n\n  function openOptions() {\n    if (chrome.runtime.openOptionsPage) {\n      chrome.runtime.openOptionsPage();\n    } else {\n      window.open(\"/src/options/index.html\", \"_blank\");\n    }\n  }\n\n  return (\n    <div className=\"min-w-[280px] p-3 text-slate-900\">\n      <div className=\"text-base font-bold mb-2\">\n        Job Tracker\n      </div>\n      {lastStatus && (\n        <div\n          className={`text-xs mb-2 ${\n            lastStatus.ok\n              ? \"text-green-600\"\n              : \"text-red-600\"\n          }`}\n        >\n          {lastStatus.message}\n        </div>\n      )}\n      <div className=\"border rounded-xl p-3 shadow-sm\">\n        <div className=\"text-xs text-slate-500 mb-2\">\n          Last submission\n        </div>\n        <div>\n          <div>\n            <span className=\"text-slate-500\">\n              Company:\n            </span>{\" \"}\n            {lastSubmission?.company || \"—\"}\n          </div>\n          <div>\n            <span className=\"text-slate-500\">\n              Title:\n            </span>{\" \"}\n            {lastSubmission?.title || \"—\"}\n          </div>\n          <div>\n            <span className=\"text-slate-500\">\n              Date:\n            </span>{\" \"}\n            {lastSubmission?.date || \"—\"}\n          </div>\n        </div>\n      </div>\n      <div className=\"flex items-center gap-2 mt-3\">\n        <button\n          className=\"px-3 py-2 rounded-lg bg-blue-600 text-white\"\n          onClick={openSheet}\n        >\n          Open Sheet\n        </button>\n        <button\n          className=\"px-3 py-2 rounded-lg border\"\n          onClick={connect}\n        >\n          Connect\n        </button>\n        <button\n          className=\"text-xs text-slate-500 underline\"\n          onClick={openOptions}\n        >\n          Options\n        </button>\n      </div>\n    </div>\n  );\n};\n","/** @format */\n\nimport React from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { Popup } from \"./ui/Popup\";\nimport \"../styles/tailwind.css\";\n\nconst container = document.getElementById(\"root\")!;\nconst root = createRoot(container);\nroot.render(<Popup />);\n\n\n"],"names":["useChromeStorage","key","initial","value","setValue","useState","useEffect","r","Popup","lastSubmission","STORAGE_KEYS","lastStatus","sheetId","setSheetId","connect","resp","openSheet","url","openOptions","jsxs","jsx","container","root","createRoot"],"mappings":"iGAUA,SAASA,EAAoBC,EAAaC,EAAY,CACpD,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAYH,CAAO,EAC7CI,OAAAA,EAAAA,UAAU,IAAM,CACd,OAAO,QAAQ,MAAM,IAAI,CAACL,CAAG,EAAIM,GAAM,CACrCH,EAAUG,EAAUN,CAAG,GAAKC,CAAO,CACrC,CAAC,CACH,EAAG,CAACD,CAAG,CAAC,EACDE,CACT,CAEO,MAAMK,EAAkB,IAAM,CACnC,MAAMC,EAAiBT,EAErBU,EAAa,eAAgB,MAAS,EAClCC,EAAaX,EAEjBU,EAAa,WAAY,MAAS,EAE9B,CAACE,EAASC,CAAU,EAAIR,EAAAA,SAAiB,EAAE,EAEjDC,EAAAA,UAAU,IAAM,CACd,OAAO,QAAQ,MAAM,IACnB,CAACI,EAAa,OAAO,EACpBH,GACCM,EACGN,EAAUG,EAAa,OAAO,GAAK,EAAA,CACtC,CAEN,EAAG,CAAA,CAAE,EAEL,eAAeI,GAAU,CACvB,MAAMC,EAAO,MAAM,OAAO,QAAQ,YAAY,CAC5C,KAAM,cAAA,CACP,EACIA,GAAA,MAAAA,EAAM,SAEA,qBAAqB,EAD9B,OAAMA,GAAA,YAAAA,EAAM,QAAS,sBAAsB,CAE/C,CAEA,SAASC,GAAY,CACnB,GAAI,CAACJ,EAAS,CACZ,MAAM,kCAAkC,EACxC,MACF,CACA,MAAMK,EAAM,0CAA0C,mBACpDL,CAAA,CACD,GACD,OAAO,KAAKK,EAAK,QAAQ,CAC3B,CAEA,SAASC,GAAc,CACjB,OAAO,QAAQ,gBACjB,OAAO,QAAQ,gBAAA,EAEf,OAAO,KAAK,0BAA2B,QAAQ,CAEnD,CAEA,OACEC,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,2BAA2B,SAAA,cAE1C,EACCT,GACCS,EAAAA,IAAC,MAAA,CACC,UAAW,gBACTT,EAAW,GACP,iBACA,cACN,GAEC,SAAAA,EAAW,OAAA,CAAA,EAGhBQ,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8BAA8B,SAAA,kBAE7C,SACC,MAAA,CACC,SAAA,CAAAD,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,iBAAiB,SAAA,WAEjC,EAAQ,KACPX,GAAA,YAAAA,EAAgB,UAAW,GAAA,EAC9B,SACC,MAAA,CACC,SAAA,CAAAW,EAAAA,IAAC,OAAA,CAAK,UAAU,iBAAiB,SAAA,SAEjC,EAAQ,KACPX,GAAA,YAAAA,EAAgB,QAAS,GAAA,EAC5B,SACC,MAAA,CACC,SAAA,CAAAW,EAAAA,IAAC,OAAA,CAAK,UAAU,iBAAiB,SAAA,QAEjC,EAAQ,KACPX,GAAA,YAAAA,EAAgB,OAAQ,GAAA,CAAA,CAC3B,CAAA,CAAA,CACF,CAAA,EACF,EACAU,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,UAAU,8CACV,QAASJ,EACV,SAAA,YAAA,CAAA,EAGDI,EAAAA,IAAC,SAAA,CACC,UAAU,8BACV,QAASN,EACV,SAAA,SAAA,CAAA,EAGDM,EAAAA,IAAC,SAAA,CACC,UAAU,mCACV,QAASF,EACV,SAAA,SAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,CAEJ,EC5HMG,EAAY,SAAS,eAAe,MAAM,EAC1CC,EAAOC,EAAWF,CAAS,EACjCC,EAAK,OAAOF,EAAAA,IAACZ,EAAA,CAAA,CAAM,CAAE"}