import{r as l,j as e,c as u}from"./tailwind-Dl9gRVam.js";import{S as h}from"./types-nBKLuWuN.js";function x(t,o){const[c,n]=l.useState(o);return l.useEffect(()=>{chrome.storage.local.get([t],i=>{n(i[t]??o)})},[t]),c}function v(){const[t,o]=l.useState(!1),[c,n]=l.useState(0);return l.useEffect(()=>{const r=()=>{try{const m=Object.keys(localStorage).filter(s=>s.startsWith("jt_form_"));o(m.length>0),n(m.length)}catch(a){console.warn("Job Tracker: Failed to check saved forms:",a)}};r();const d=()=>r();return window.addEventListener("storage",d),()=>window.removeEventListener("storage",d)},[]),{hasSavedForms:t,savedFormsCount:c,clearAllSavedForms:()=>{try{Object.keys(localStorage).filter(a=>a.startsWith("jt_form_")).forEach(a=>localStorage.removeItem(a)),o(!1),n(0),console.log("Job Tracker: All saved forms cleared")}catch(r){console.warn("Job Tracker: Failed to clear saved forms:",r)}}}}const f=()=>{const t=x(h.lastSubmission,void 0),o=x(h.lastStatus,void 0),{hasSavedForms:c,savedFormsCount:n,clearAllSavedForms:i}=v(),[r,d]=l.useState("");l.useEffect(()=>{chrome.storage.local.get([h.sheetId],s=>d(s[h.sheetId]||""))},[]);async function a(){const s=await chrome.runtime.sendMessage({type:"JT_AUTHORIZE"});s!=null&&s.ok?alert("Connected to Google"):alert((s==null?void 0:s.error)||"Authorization failed")}function m(){if(!r){alert("Set your Google Sheet in Options");return}const s=`https://docs.google.com/spreadsheets/d/${encodeURIComponent(r)}`;window.open(s,"_blank")}return e.jsxs("div",{className:"min-w-[280px] p-3 text-slate-900",children:[e.jsx("div",{className:"text-base font-bold mb-2",children:"Job Tracker"}),c&&e.jsxs("div",{className:"mb-3 p-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"text-xs text-yellow-800 mb-1",children:["⚠️ ",n," form",n>1?"s":""," with unsaved data"]}),e.jsx("button",{onClick:i,className:"text-xs text-yellow-700 underline hover:text-yellow-900",children:"Clear all saved forms"})]}),o&&e.jsx("div",{className:`text-xs mb-2 ${o.ok?"text-green-600":"text-red-600"}`,children:o.message}),e.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-2",children:"Last submission"}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Company:"})," ",(t==null?void 0:t.company)||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Title:"})," ",(t==null?void 0:t.title)||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Date:"})," ",(t==null?void 0:t.date)||"—"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{className:"px-3 py-2 rounded-lg bg-blue-600 text-white",onClick:m,children:"Open Sheet"}),e.jsx("button",{className:"px-3 py-2 rounded-lg border",onClick:a,children:"Connect"}),e.jsx("button",{className:"text-xs text-slate-500 underline",onClick:()=>{chrome.runtime.openOptionsPage?chrome.runtime.openOptionsPage():window.open("/src/options/index.html","_blank")},children:"Options"})]}),e.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:[e.jsx("div",{children:"✓ Auto-save every 3 seconds"}),e.jsx("div",{children:"✓ Warn before leaving with changes"}),e.jsx("div",{children:"✓ Restore data on page reload"})]})]})},g=document.getElementById("root"),p=u(g);p.render(e.jsx(f,{}));
//# sourceMappingURL=index.html-CI1uhcFA.js.map
